EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 4
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Text Notes 7000 6900 0    100  ~ 0
Thermostat control board
$Sheet
S 1150 6100 800  500 
U 5E6A63AE
F0 "regulator_out" 50
F1 "regulator_out.sch" 50
F2 "SCL" I L 1150 6200 50 
F3 "SDA" I L 1150 6300 50 
F4 "pwm_out" I L 1150 6400 50 
F5 "INT_OUT" I L 1150 6500 50 
$EndSheet
Text Label 600  6200 0    50   ~ 0
SCL
Text Label 600  6300 0    50   ~ 0
SDA
$Comp
L Connector_Generic:Conn_01x03 J1
U 1 1 5EA0A1B2
P 3250 6500
F 0 "J1" H 3330 6542 50  0000 L CNN
F 1 "Thermosthat" H 3330 6451 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x03_P2.54mm_Vertical_SMD_Pin1Left" H 3250 6500 50  0001 C CNN
F 3 "~" H 3250 6500 50  0001 C CNN
	1    3250 6500
	1    0    0    -1  
$EndComp
Text Label 2500 6400 0    50   ~ 0
regulator_out
Text Label 2500 6500 0    50   ~ 0
8
Text Label 2500 6600 0    50   ~ 0
9
Wire Wire Line
	2500 6400 3050 6400
Wire Wire Line
	2500 6500 3050 6500
Wire Wire Line
	2500 6600 3050 6600
$Comp
L power:+36V #PWR0118
U 1 1 5EA15002
P 2500 6500
F 0 "#PWR0118" H 2500 6350 50  0001 C CNN
F 1 "+36V" V 2515 6628 50  0000 L CNN
F 2 "" H 2500 6500 50  0001 C CNN
F 3 "" H 2500 6500 50  0001 C CNN
	1    2500 6500
	0    -1   -1   0   
$EndComp
$Comp
L power:GNDA #PWR0119
U 1 1 5EA15462
P 2500 6600
F 0 "#PWR0119" H 2500 6350 50  0001 C CNN
F 1 "GNDA" V 2505 6473 50  0000 R CNN
F 2 "" H 2500 6600 50  0001 C CNN
F 3 "" H 2500 6600 50  0001 C CNN
	1    2500 6600
	0    1    1    0   
$EndComp
Text Notes 2300 6200 0    50   ~ 0
7-8-9 Port for Thermosthat control
Wire Notes Line
	2100 6000 3850 6000
Wire Notes Line
	3850 6000 3850 6750
Wire Notes Line
	2100 6000 2100 6750
Text Label 600  6400 0    50   ~ 0
regulator_out
Wire Wire Line
	600  6200 1150 6200
Wire Wire Line
	600  6300 1150 6300
Wire Wire Line
	600  6400 1150 6400
Wire Notes Line
	500  6000 2050 6000
Wire Notes Line
	2050 6750 500  6750
Wire Notes Line
	500  6000 500  6750
Text Label 600  6500 0    50   ~ 0
AVR_INT
Wire Wire Line
	600  6500 1150 6500
$Comp
L Regulator_Switching:LM2574M-5 U?
U 1 1 5EABE96F
P 8800 3600
AR Path="/5E8AC4D3/5EABE96F" Ref="U?"  Part="1" 
AR Path="/5EABE96F" Ref="U3"  Part="1" 
F 0 "U3" H 8800 3967 50  0000 C CNN
F 1 "LM2574M-5" H 8800 3876 50  0000 C CNN
F 2 "Package_SO:SOIC-14W_7.5x9mm_P1.27mm" H 8400 3950 50  0001 L CIN
F 3 "http://www.national.com/ds/LM/LM2574.pdf" H 8800 3600 50  0001 C CNN
	1    8800 3600
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5EABE975
P 7700 3700
AR Path="/5E8AC4D3/5EABE975" Ref="C?"  Part="1" 
AR Path="/5EABE975" Ref="C15"  Part="1" 
F 0 "C15" H 7815 3746 50  0000 L CNN
F 1 "22u" H 7815 3655 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 7738 3550 50  0001 C CNN
F 3 "~" H 7700 3700 50  0001 C CNN
	1    7700 3700
	1    0    0    -1  
$EndComp
$Comp
L Device:D_Schottky D?
U 1 1 5EABE97B
P 9400 3900
AR Path="/5E8AC4D3/5EABE97B" Ref="D?"  Part="1" 
AR Path="/5EABE97B" Ref="D4"  Part="1" 
F 0 "D4" V 9354 3980 50  0000 L CNN
F 1 "SL03" V 9445 3980 50  0000 L CNN
F 2 "Diode_SMD:D_SMF" H 9400 3900 50  0001 C CNN
F 3 "~" H 9400 3900 50  0001 C CNN
	1    9400 3900
	0    1    1    0   
$EndComp
$Comp
L Device:L_Core_Iron L?
U 1 1 5EABE987
P 9750 3700
AR Path="/5E8AC4D3/5EABE987" Ref="L?"  Part="1" 
AR Path="/5EABE987" Ref="L2"  Part="1" 
F 0 "L2" V 9975 3700 50  0000 C CNN
F 1 "330u" V 9884 3700 50  0000 C CNN
F 2 "Inductor_SMD:L_7.3x7.3_H3.5" H 9750 3700 50  0001 C CNN
F 3 "~" H 9750 3700 50  0001 C CNN
	1    9750 3700
	0    -1   -1   0   
$EndComp
Wire Wire Line
	9300 3700 9400 3700
Wire Wire Line
	9400 3700 9400 3750
Connection ~ 9400 3700
Wire Wire Line
	9400 3700 9600 3700
Wire Wire Line
	9400 4050 9400 4100
Wire Wire Line
	10100 3700 10100 3400
Wire Wire Line
	10100 3400 9400 3400
Wire Wire Line
	9400 3400 9400 3500
Wire Wire Line
	9400 3500 9300 3500
Connection ~ 10100 3700
Wire Wire Line
	8300 3500 7700 3500
Wire Wire Line
	7700 3500 7700 3550
Wire Wire Line
	8900 3900 8900 3950
Wire Wire Line
	8900 3950 8800 3950
Wire Wire Line
	8800 3950 8800 3900
$Comp
L power:GND #PWR?
U 1 1 5EABE9AF
P 8950 3950
AR Path="/5E8AC4D3/5EABE9AF" Ref="#PWR?"  Part="1" 
AR Path="/5EABE9AF" Ref="#PWR0122"  Part="1" 
F 0 "#PWR0122" H 8950 3700 50  0001 C CNN
F 1 "GND" H 8955 3777 50  0000 C CNN
F 2 "" H 8950 3950 50  0001 C CNN
F 3 "" H 8950 3950 50  0001 C CNN
	1    8950 3950
	1    0    0    -1  
$EndComp
$Comp
L power:GNDA #PWR?
U 1 1 5EABE9B5
P 8750 3950
AR Path="/5E8AC4D3/5EABE9B5" Ref="#PWR?"  Part="1" 
AR Path="/5EABE9B5" Ref="#PWR0123"  Part="1" 
F 0 "#PWR0123" H 8750 3700 50  0001 C CNN
F 1 "GNDA" H 8755 3777 50  0000 C CNN
F 2 "" H 8750 3950 50  0001 C CNN
F 3 "" H 8750 3950 50  0001 C CNN
	1    8750 3950
	1    0    0    -1  
$EndComp
Wire Wire Line
	8750 3950 8800 3950
Connection ~ 8800 3950
Wire Wire Line
	8900 3950 8950 3950
Connection ~ 8900 3950
$Comp
L power:GNDA #PWR?
U 1 1 5EABE9BF
P 7700 3950
AR Path="/5E8AC4D3/5EABE9BF" Ref="#PWR?"  Part="1" 
AR Path="/5EABE9BF" Ref="#PWR0124"  Part="1" 
F 0 "#PWR0124" H 7700 3700 50  0001 C CNN
F 1 "GNDA" H 7705 3777 50  0000 C CNN
F 2 "" H 7700 3950 50  0001 C CNN
F 3 "" H 7700 3950 50  0001 C CNN
	1    7700 3950
	1    0    0    -1  
$EndComp
Wire Wire Line
	7700 3950 7700 3850
$Comp
L power:GND #PWR?
U 1 1 5EABE9C6
P 8250 3950
AR Path="/5E8AC4D3/5EABE9C6" Ref="#PWR?"  Part="1" 
AR Path="/5EABE9C6" Ref="#PWR0125"  Part="1" 
F 0 "#PWR0125" H 8250 3700 50  0001 C CNN
F 1 "GND" H 8255 3777 50  0000 C CNN
F 2 "" H 8250 3950 50  0001 C CNN
F 3 "" H 8250 3950 50  0001 C CNN
	1    8250 3950
	1    0    0    -1  
$EndComp
Wire Wire Line
	8250 3950 8250 3700
Wire Wire Line
	8250 3700 8300 3700
Text Notes 9250 4250 0    50   ~ 0
20V, 1A, E-LAB
Wire Wire Line
	9400 4100 9200 4100
Wire Wire Line
	9200 4100 9200 3950
Wire Wire Line
	9200 3950 8950 3950
Connection ~ 9400 4100
Connection ~ 8950 3950
Text Notes 7950 3050 0    50   ~ 0
Step-Down converter to transform variable ~~30V supply to 5V
Wire Notes Line
	7200 2800 11000 2800
Wire Notes Line
	11000 2800 11000 4400
Wire Notes Line
	11000 4400 7200 4400
Wire Notes Line
	7200 2800 7200 4400
$Comp
L power:+36V #PWR?
U 1 1 5EABE9D9
P 7700 3500
AR Path="/5E8AC4D3/5EABE9D9" Ref="#PWR?"  Part="1" 
AR Path="/5EABE9D9" Ref="#PWR0126"  Part="1" 
F 0 "#PWR0126" H 7700 3350 50  0001 C CNN
F 1 "+36V" H 7715 3673 50  0000 C CNN
F 2 "" H 7700 3500 50  0001 C CNN
F 3 "" H 7700 3500 50  0001 C CNN
	1    7700 3500
	1    0    0    -1  
$EndComp
Connection ~ 7700 3500
$Comp
L Device:C C?
U 1 1 5EABE9E6
P 8150 5450
AR Path="/5E8AC4D3/5EABE9E6" Ref="C?"  Part="1" 
AR Path="/5EABE9E6" Ref="C16"  Part="1" 
F 0 "C16" H 8265 5496 50  0000 L CNN
F 1 "100n" H 8265 5405 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 8188 5300 50  0001 C CNN
F 3 "~" H 8150 5450 50  0001 C CNN
	1    8150 5450
	1    0    0    -1  
$EndComp
Wire Wire Line
	8150 5300 8150 5150
$Comp
L Device:C C?
U 1 1 5EABE9F8
P 9950 5450
AR Path="/5E8AC4D3/5EABE9F8" Ref="C?"  Part="1" 
AR Path="/5EABE9F8" Ref="C19"  Part="1" 
F 0 "C19" H 10065 5496 50  0000 L CNN
F 1 "2u2" H 10065 5405 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 9988 5300 50  0001 C CNN
F 3 "~" H 9950 5450 50  0001 C CNN
	1    9950 5450
	1    0    0    -1  
$EndComp
Wire Wire Line
	9950 5300 9950 5150
$Comp
L power:+5V #PWR?
U 1 1 5EABEA02
P 8150 5150
AR Path="/5E8AC4D3/5EABEA02" Ref="#PWR?"  Part="1" 
AR Path="/5EABEA02" Ref="#PWR0127"  Part="1" 
F 0 "#PWR0127" H 8150 5000 50  0001 C CNN
F 1 "+5V" H 8165 5323 50  0000 C CNN
F 2 "" H 8150 5150 50  0001 C CNN
F 3 "" H 8150 5150 50  0001 C CNN
	1    8150 5150
	1    0    0    -1  
$EndComp
Connection ~ 8150 5150
$Comp
L power:+3V3 #PWR?
U 1 1 5EABEA09
P 9950 5150
AR Path="/5E8AC4D3/5EABEA09" Ref="#PWR?"  Part="1" 
AR Path="/5EABEA09" Ref="#PWR0128"  Part="1" 
F 0 "#PWR0128" H 9950 5000 50  0001 C CNN
F 1 "+3V3" H 9965 5323 50  0000 C CNN
F 2 "" H 9950 5150 50  0001 C CNN
F 3 "" H 9950 5150 50  0001 C CNN
	1    9950 5150
	1    0    0    -1  
$EndComp
Connection ~ 9950 5150
$Comp
L power:GND #PWR?
U 1 1 5EABEA10
P 9950 5650
AR Path="/5E8AC4D3/5EABEA10" Ref="#PWR?"  Part="1" 
AR Path="/5EABEA10" Ref="#PWR0129"  Part="1" 
F 0 "#PWR0129" H 9950 5400 50  0001 C CNN
F 1 "GND" H 9955 5477 50  0000 C CNN
F 2 "" H 9950 5650 50  0001 C CNN
F 3 "" H 9950 5650 50  0001 C CNN
	1    9950 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	9950 5650 9950 5600
$Comp
L power:GND #PWR?
U 1 1 5EABEA1E
P 9050 5650
AR Path="/5E8AC4D3/5EABEA1E" Ref="#PWR?"  Part="1" 
AR Path="/5EABEA1E" Ref="#PWR0130"  Part="1" 
F 0 "#PWR0130" H 9050 5400 50  0001 C CNN
F 1 "GND" H 9055 5477 50  0000 C CNN
F 2 "" H 9050 5650 50  0001 C CNN
F 3 "" H 9050 5650 50  0001 C CNN
	1    9050 5650
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EABEA25
P 8150 5650
AR Path="/5E8AC4D3/5EABEA25" Ref="#PWR?"  Part="1" 
AR Path="/5EABEA25" Ref="#PWR0131"  Part="1" 
F 0 "#PWR0131" H 8150 5400 50  0001 C CNN
F 1 "GND" H 8155 5477 50  0000 C CNN
F 2 "" H 8150 5650 50  0001 C CNN
F 3 "" H 8150 5650 50  0001 C CNN
	1    8150 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	8150 5650 8150 5600
Text Notes 8100 4700 0    50   ~ 0
3,3V is generated with an LDO fixed voltage supply
Wire Notes Line
	7200 4450 11000 4450
Wire Notes Line
	11000 4450 11000 5950
Wire Notes Line
	11000 5950 7200 5950
Wire Notes Line
	7200 4450 7200 5950
Wire Notes Line
	2050 6000 2050 6750
Wire Notes Line
	3850 6750 2100 6750
$Comp
L Regulator_Linear:LD1117S33TR_SOT223 U4
U 1 1 5F0DC12F
P 9050 5150
F 0 "U4" H 9050 5392 50  0000 C CNN
F 1 "LD1117S33TR_SOT223" H 9050 5301 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-223-3_TabPin2" H 9050 5350 50  0001 C CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/CD00000544.pdf" H 9150 4900 50  0001 C CNN
	1    9050 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	9050 5450 9050 5650
Wire Wire Line
	8150 5150 8750 5150
Wire Wire Line
	9350 5150 9950 5150
$Comp
L Memory_EEPROM:CAT24C256 U5
U 1 1 5E6D82CA
P 4700 6900
F 0 "U5" H 4450 7150 50  0000 C CNN
F 1 "AT24C512" H 4950 7150 50  0000 C CNN
F 2 "Package_DIP:DIP-8_W7.62mm_SMDSocket_SmallPads" H 4700 6900 50  0001 C CNN
F 3 "https://www.onsemi.cn/PowerSolutions/document/CAT24C256-D.PDF" H 4700 6900 50  0001 C CNN
	1    4700 6900
	1    0    0    -1  
$EndComp
$Comp
L Device:C C30
U 1 1 5E6D923D
P 4450 6500
F 0 "C30" V 4198 6500 50  0000 C CNN
F 1 "10n" V 4289 6500 50  0000 C CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 4488 6350 50  0001 C CNN
F 3 "~" H 4450 6500 50  0001 C CNN
	1    4450 6500
	0    1    1    0   
$EndComp
$Comp
L power:+3V3 #PWR0169
U 1 1 5E6D9ED7
P 4700 6400
F 0 "#PWR0169" H 4700 6250 50  0001 C CNN
F 1 "+3V3" H 4715 6573 50  0000 C CNN
F 2 "" H 4700 6400 50  0001 C CNN
F 3 "" H 4700 6400 50  0001 C CNN
	1    4700 6400
	1    0    0    -1  
$EndComp
Wire Wire Line
	4700 6400 4700 6500
Wire Wire Line
	4600 6500 4700 6500
Connection ~ 4700 6500
Wire Wire Line
	4700 6500 4700 6600
$Comp
L power:GND #PWR0170
U 1 1 5E6F7B23
P 4250 6500
F 0 "#PWR0170" H 4250 6250 50  0001 C CNN
F 1 "GND" V 4255 6372 50  0000 R CNN
F 2 "" H 4250 6500 50  0001 C CNN
F 3 "" H 4250 6500 50  0001 C CNN
	1    4250 6500
	0    1    1    0   
$EndComp
Wire Wire Line
	4250 6500 4300 6500
Wire Wire Line
	4250 6800 4250 6900
Wire Wire Line
	4250 7250 4700 7250
Wire Wire Line
	5150 7250 5150 7000
Wire Wire Line
	5150 7000 5100 7000
Wire Wire Line
	4700 7200 4700 7250
Connection ~ 4700 7250
Wire Wire Line
	4700 7250 5150 7250
Wire Wire Line
	4250 6800 4300 6800
Wire Wire Line
	4300 6900 4250 6900
Connection ~ 4250 6900
Wire Wire Line
	4250 6900 4250 7000
Wire Wire Line
	4300 7000 4250 7000
Connection ~ 4250 7000
Wire Wire Line
	4250 7000 4250 7250
$Comp
L power:GND #PWR0171
U 1 1 5E7560C3
P 4700 7300
F 0 "#PWR0171" H 4700 7050 50  0001 C CNN
F 1 "GND" H 4705 7127 50  0000 C CNN
F 2 "" H 4700 7300 50  0001 C CNN
F 3 "" H 4700 7300 50  0001 C CNN
	1    4700 7300
	1    0    0    -1  
$EndComp
Wire Wire Line
	4700 7300 4700 7250
Text Notes 4150 6150 0    50   ~ 0
EEPROM for off-ESP config
Wire Notes Line
	5300 6000 5300 7550
Wire Notes Line
	5300 7550 3900 7550
Wire Notes Line
	3900 7550 3900 6000
Wire Notes Line
	3900 6000 5300 6000
Text Label 5250 6800 2    50   ~ 0
SDA
Wire Wire Line
	5250 6800 5100 6800
Text Label 5250 6900 2    50   ~ 0
SCL
Wire Wire Line
	5250 6900 5100 6900
Wire Wire Line
	10100 3700 9900 3700
Wire Wire Line
	10350 3700 10100 3700
$Comp
L power:+5V #PWR?
U 1 1 5EABE99D
P 10350 3700
AR Path="/5E8AC4D3/5EABE99D" Ref="#PWR?"  Part="1" 
AR Path="/5EABE99D" Ref="#PWR0120"  Part="1" 
F 0 "#PWR0120" H 10350 3550 50  0001 C CNN
F 1 "+5V" V 10365 3828 50  0000 L CNN
F 2 "" H 10350 3700 50  0001 C CNN
F 3 "" H 10350 3700 50  0001 C CNN
	1    10350 3700
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EABE9A4
P 10350 4100
AR Path="/5E8AC4D3/5EABE9A4" Ref="#PWR?"  Part="1" 
AR Path="/5EABE9A4" Ref="#PWR0121"  Part="1" 
F 0 "#PWR0121" H 10350 3850 50  0001 C CNN
F 1 "GND" V 10355 3972 50  0000 R CNN
F 2 "" H 10350 4100 50  0001 C CNN
F 3 "" H 10350 4100 50  0001 C CNN
	1    10350 4100
	0    -1   -1   0   
$EndComp
Wire Wire Line
	10350 4100 10100 4100
Wire Wire Line
	9400 4100 10100 4100
Connection ~ 10100 4100
Wire Wire Line
	10100 4100 10100 4050
Wire Wire Line
	10100 3750 10100 3700
$Comp
L Device:C C?
U 1 1 5EABE981
P 10100 3900
AR Path="/5E8AC4D3/5EABE981" Ref="C?"  Part="1" 
AR Path="/5EABE981" Ref="C20"  Part="1" 
F 0 "C20" H 10215 3946 50  0000 L CNN
F 1 "220u" H 10215 3855 50  0000 L CNN
F 2 "Capacitor_SMD:CP_Elec_6.3x5.4" H 10138 3750 50  0001 C CNN
F 3 "~" H 10100 3900 50  0001 C CNN
	1    10100 3900
	1    0    0    -1  
$EndComp
Text Notes 750  7000 0    50   ~ 0
Will we do peripherals with AVR or does MKW41Z has enough free pins?\nDo we want to try touch interface with MKW41 or AVR?
$Sheet
S 5750 6100 1150 700 
U 5F306ECC
F0 "display" 50
F1 "display.sch" 50
F2 "MOSI" I L 5750 6200 50 
F3 "SCK" I L 5750 6300 50 
F4 "BUSY" I L 5750 6400 50 
F5 "~RESET" I L 5750 6500 50 
F6 "DATA-COMMAND" I L 5750 6600 50 
F7 "CS" I L 5750 6700 50 
$EndSheet
$Sheet
S 5800 7150 650  300 
U 5F32546C
F0 "sensors" 50
F1 "sensors.sch" 50
F2 "SCL" I L 5800 7250 50 
F3 "SDA" I L 5800 7350 50 
$EndSheet
$EndSCHEMATC
